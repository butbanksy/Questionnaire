@model int

@{
    String idOfCanvas = "myChart" + @Model;
}

<canvas id=@idOfCanvas width="200" height="200"></canvas>
<script>

    $(document).ready(function() {
        $.get("/statistics/question/@Model",
            function(data, status) {
                if (status === "success") {
                    let questionData = data;
                }
            });
        $.get("/statistics/questionOptions/@Model",
            (data, success) => {
                let questionOptions = [];
                if (success === "success") {
                    console.log(success);
                    data.forEach((obj) => {
                        questionOptions.push(obj.title);
                    });
                    console.log(questionOptions);
                    var id = 'myChart' + @Model.ToString();
                    var ctx = document.getElementById(id).getContext('2d');

                    var myChart = new Chart(ctx,
                        {
                            type: 'bar',
                            data: {
                                labels: questionOptions,
                                datasets: [
                                    {
                                        label: '# of Votes For Each Question',
                                        data: questionData,
                                        backgroundColor: [
                                            'rgba(255, 99, 132, 0.2)',
                                            'rgba(54, 162, 235, 0.2)',
                                            'rgba(255, 206, 86, 0.2)',
                                            'rgba(75, 192, 192, 0.2)',
                                            'rgba(153, 102, 255, 0.2)'
                                        ],
                                        borderColor: [
                                            'rgba(255, 99, 132, 1)',
                                            'rgba(54, 162, 235, 1)',
                                            'rgba(255, 206, 86, 1)',
                                            'rgba(75, 192, 192, 1)',
                                            'rgba(153, 102, 255, 1)'
                                        ],
                                        borderWidth: 2
                                    }
                                ]
                            },
                            options: {
                                scales: {
                                    yAxes: [
                                        {
                                            ticks: {
                                                beginAtZero: true
                                            }
                                        }
                                    ]
                                }
                            }
                        });
                    console.log(myChart);
                }
            });

    });
</script>